{"version":3,"file":"extractProps.esm.js","sources":["../../src/utils/extractProps.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function extractProps(\n  props: {\n    className?: string;\n    style?: React.CSSProperties;\n    children?: React.ReactNode;\n    as?: keyof JSX.IntrinsicElements;\n    [key: string]: any;\n  },\n  propDefs: { [key: string]: any },\n) {\n  let className: string[] = (props.className || '').split(' ');\n  let style: React.CSSProperties = { ...props.style };\n  const hasProp = (key: string) => props.hasOwnProperty(key);\n\n  for (const key in propDefs) {\n    // Check if the prop is present or has a default value\n    if (!hasProp(key) && !propDefs[key].hasOwnProperty('default')) {\n      continue; // Skip processing if neither is present\n    }\n\n    const value = hasProp(key) ? props[key] : propDefs[key].default;\n    const propDefsValues = propDefs[key].values;\n    const propDefsCustomProperties = propDefs[key].customProperties;\n    const propDefsClassName = propDefs[key].className;\n    const isResponsive = propDefs[key].responsive;\n\n    const handleValue = (val: string, prefix: string = '') => {\n      // Skip adding class name if the key is \"as\"\n      if (key === 'as') return;\n\n      if (propDefsValues.includes(val)) {\n        className.push(`${prefix}${propDefsClassName}-${val}`);\n      } else {\n        const customPropertyKey =\n          isResponsive && prefix\n            ? `${propDefsCustomProperties}-${prefix.slice(0, -1)}`\n            : propDefsCustomProperties;\n        (style as any)[customPropertyKey] = val;\n        className.push(`${prefix}${propDefsClassName}`);\n      }\n    };\n\n    if (isResponsive && typeof value === 'object') {\n      // Handle responsive object values\n      for (const breakpoint in value) {\n        const prefix = breakpoint === 'initial' ? '' : `${breakpoint}:`;\n        handleValue(value[breakpoint], prefix);\n      }\n    } else {\n      handleValue(value);\n    }\n  }\n\n  // Ensure keys from props that are defined in propDefs are removed\n  const cleanedProps = Object.keys(props).reduce((acc, key) => {\n    if (!propDefs.hasOwnProperty(key)) {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {} as { [key: string]: any });\n\n  const newClassNames = className\n    .filter(name => name && name.trim() !== '')\n    .join(' ');\n\n  return { ...cleanedProps, className: newClassNames, style };\n}\n"],"names":[],"mappings":"AAgBgB,SAAA,YAAA,CACd,OAOA,QACA,EAAA;AACA,EAAA,IAAI,SAAuB,GAAA,CAAA,KAAA,CAAM,SAAa,IAAA,EAAA,EAAI,MAAM,GAAG,CAAA;AAC3D,EAAA,IAAI,KAA6B,GAAA,EAAE,GAAG,KAAA,CAAM,KAAM,EAAA;AAClD,EAAA,MAAM,OAAU,GAAA,CAAC,GAAgB,KAAA,KAAA,CAAM,eAAe,GAAG,CAAA;AAEzD,EAAA,KAAA,MAAW,OAAO,QAAU,EAAA;AAE1B,IAAI,IAAA,CAAC,OAAQ,CAAA,GAAG,CAAK,IAAA,CAAC,SAAS,GAAG,CAAA,CAAE,cAAe,CAAA,SAAS,CAAG,EAAA;AAC7D,MAAA;AAAA;AAGF,IAAM,MAAA,KAAA,GAAQ,QAAQ,GAAG,CAAA,GAAI,MAAM,GAAG,CAAA,GAAI,QAAS,CAAA,GAAG,CAAE,CAAA,OAAA;AACxD,IAAM,MAAA,cAAA,GAAiB,QAAS,CAAA,GAAG,CAAE,CAAA,MAAA;AACrC,IAAM,MAAA,wBAAA,GAA2B,QAAS,CAAA,GAAG,CAAE,CAAA,gBAAA;AAC/C,IAAM,MAAA,iBAAA,GAAoB,QAAS,CAAA,GAAG,CAAE,CAAA,SAAA;AACxC,IAAM,MAAA,YAAA,GAAe,QAAS,CAAA,GAAG,CAAE,CAAA,UAAA;AAEnC,IAAA,MAAM,WAAc,GAAA,CAAC,GAAa,EAAA,MAAA,GAAiB,EAAO,KAAA;AAExD,MAAA,IAAI,QAAQ,IAAM,EAAA;AAElB,MAAI,IAAA,cAAA,CAAe,QAAS,CAAA,GAAG,CAAG,EAAA;AAChC,QAAA,SAAA,CAAU,KAAK,CAAG,EAAA,MAAM,GAAG,iBAAiB,CAAA,CAAA,EAAI,GAAG,CAAE,CAAA,CAAA;AAAA,OAChD,MAAA;AACL,QAAM,MAAA,iBAAA,GACJ,YAAgB,IAAA,MAAA,GACZ,CAAG,EAAA,wBAAwB,CAAI,CAAA,EAAA,MAAA,CAAO,KAAM,CAAA,CAAA,EAAG,CAAE,CAAA,CAAC,CAClD,CAAA,GAAA,wBAAA;AACN,QAAC,KAAA,CAAc,iBAAiB,CAAI,GAAA,GAAA;AACpC,QAAA,SAAA,CAAU,IAAK,CAAA,CAAA,EAAG,MAAM,CAAA,EAAG,iBAAiB,CAAE,CAAA,CAAA;AAAA;AAChD,KACF;AAEA,IAAI,IAAA,YAAA,IAAgB,OAAO,KAAA,KAAU,QAAU,EAAA;AAE7C,MAAA,KAAA,MAAW,cAAc,KAAO,EAAA;AAC9B,QAAA,MAAM,MAAS,GAAA,UAAA,KAAe,SAAY,GAAA,EAAA,GAAK,GAAG,UAAU,CAAA,CAAA,CAAA;AAC5D,QAAY,WAAA,CAAA,KAAA,CAAM,UAAU,CAAA,EAAG,MAAM,CAAA;AAAA;AACvC,KACK,MAAA;AACL,MAAA,WAAA,CAAY,KAAK,CAAA;AAAA;AACnB;AAIF,EAAM,MAAA,YAAA,GAAe,OAAO,IAAK,CAAA,KAAK,EAAE,MAAO,CAAA,CAAC,KAAK,GAAQ,KAAA;AAC3D,IAAA,IAAI,CAAC,QAAA,CAAS,cAAe,CAAA,GAAG,CAAG,EAAA;AACjC,MAAI,GAAA,CAAA,GAAG,CAAI,GAAA,KAAA,CAAM,GAAG,CAAA;AAAA;AAEtB,IAAO,OAAA,GAAA;AAAA,GACT,EAAG,EAA4B,CAAA;AAE/B,EAAM,MAAA,aAAA,GAAgB,SACnB,CAAA,MAAA,CAAO,CAAQ,IAAA,KAAA,IAAA,IAAQ,IAAK,CAAA,IAAA,EAAW,KAAA,EAAE,CACzC,CAAA,IAAA,CAAK,GAAG,CAAA;AAEX,EAAA,OAAO,EAAE,GAAG,YAAc,EAAA,SAAA,EAAW,eAAe,KAAM,EAAA;AAC5D;;;;"}