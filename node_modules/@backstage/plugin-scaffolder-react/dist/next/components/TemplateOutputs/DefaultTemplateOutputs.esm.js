import { InfoCard, MarkdownContent } from '@backstage/core-components';
import { useTranslationRef } from '@backstage/frontend-plugin-api';
import Box from '@material-ui/core/Box';
import Paper from '@material-ui/core/Paper';
import React, { useState, useEffect, useMemo } from 'react';
import { scaffolderReactTranslationRef } from '../../../translation.esm.js';
import { LinkOutputs } from './LinkOutputs.esm.js';
import { TextOutputs } from './TextOutputs.esm.js';

const DefaultTemplateOutputs = (props) => {
  const { t } = useTranslationRef(scaffolderReactTranslationRef);
  const { output } = props;
  const [textOutputIndex, setTextOutputIndex] = useState(
    void 0
  );
  useEffect(() => {
    if (textOutputIndex === void 0 && output?.text) {
      const defaultIndex = output.text.findIndex(
        (text) => text.default
      );
      setTextOutputIndex(defaultIndex >= 0 ? defaultIndex : 0);
    }
  }, [textOutputIndex, output]);
  const textOutput = useMemo(
    () => textOutputIndex !== void 0 ? output?.text?.[textOutputIndex] : null,
    [output, textOutputIndex]
  );
  if (!output) {
    return null;
  }
  const displayTextButtons = (output.text || []).length > 1;
  const emptyOutput = (output.links || []).length === 0 && !displayTextButtons;
  return /* @__PURE__ */ React.createElement(React.Fragment, null, !emptyOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, "data-testid": "output-box" }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(
    Box,
    {
      padding: 2,
      justifyContent: "center",
      display: "flex",
      gridGap: 16,
      flexWrap: "wrap"
    },
    displayTextButtons && /* @__PURE__ */ React.createElement(
      TextOutputs,
      {
        "data-testid": "text-outputs",
        output,
        index: textOutputIndex,
        setIndex: setTextOutputIndex
      }
    ),
    /* @__PURE__ */ React.createElement(LinkOutputs, { output })
  ))) : null, textOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, "data-testid": "text-output-box" }, /* @__PURE__ */ React.createElement(
    InfoCard,
    {
      title: textOutput.title ?? t("templateOutputs.title"),
      noPadding: true,
      titleTypographyProps: { component: "h2" }
    },
    /* @__PURE__ */ React.createElement(Box, { padding: 2, height: "100%" }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: textOutput.content ?? "" }))
  )) : null);
};

export { DefaultTemplateOutputs };
//# sourceMappingURL=DefaultTemplateOutputs.esm.js.map
